<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="index.css" rel="stylesheet" />
    <title>BUS</title>
  </head>
  <body>
    <h1>정류장을 입력하세요</h1>
    <form>
      <input type="search" id="busstop" /><button type="submit">검색</button>
    </form>
    <div id="bus"></div>
    <!-- 지나가는 버스가 뜰 예정 -->
  </body>
  <script>
    const url =
      "https://b252ff7f-36d3-4283-b911-570f8c6175fc.mock.pstmn.io/bus?serviceKey=";
    const KEY =
      "uG%2BJuWEbMSaye1aNK30LEEj7q%2FlpvJdORLSlG5xGayVkIFFsU%2FM7Tz2fEQcGP0MC1BkmhSpufCkwJOkjHVKn%2Fg%3D%3D&BUSSTOP_ID=";
    const station = document.getElementById("busstop").value;
    console.log(station);
    const api_url = url + "?serviceKey=" + KEY + "&BUSSTOP_ID=" + station;
    // const busstop_id = document.getElementById("busstop");
    axios
      .get(api_url)
      .then(function (result) {
        console.log("결과 : ", result);
        let busHtml = "";
        const busstop_list = result.data.BUSSTOP_LIST;
        for (var i = 0; i < busstop_list.length; i++) {
          const bus = busstop_list[i].LINE_NAME;
          busHtml += bus;
          console.log(bus);
        }

        document.querySelector("#bus").innerHTML = busHtml;
      })
      .catch(function (error) {
        console.log("에러 : ", error);
      });
  </script>
</html>
